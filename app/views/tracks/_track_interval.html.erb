<div id='track-interval' class=''>

  <% if track.intervals.present? %>
    <table class = "table table-hover table-striped table-borderless table-light" style="width: 80%; margin-left: 10%; border-radius: 5px;">
      <thead>
        <tr class="text-center bg-dark text-light">
          <th> Start </th>
          <th> End </th>
          <th> Description </th>
          <th> User </th>
          <th colspan="3"></th>
        </tr>
      </thead>
      <% track.intervals.each do |interval| %>
        <tr class="text-center">
          <td>
            <p class="fontColorTable"><%= interval.start_at.strftime("%F") %></p>
            <p class="fontColorTable"><%= interval.start_at.strftime("%T") %></p>
            &nbsp&nbsp
          </td>
          <td> 
            <p class="fontColorTable"><%= interval.end_at.strftime("%F") %> </p>
            <p class="fontColorTable"><%= interval.end_at.strftime("%T") %> </p>
            &nbsp
          </td>
          <td> <p class="fontColorTable"><%= interval.description %> </p> &nbsp</td>
          <td> <p class="fontColorTable"><%= "#{interval.user.name} #{interval.user.lastname}" %> </p> &nbsp</td>
          <td>
            <%= link_to track_interval_path(track_id: track.id, id: interval.id), method: :delete, data: { confirm: 'Are you sure?' }, class: "btnIcon btnIconColor btnTrash" do %>
              <i class="fa fa-trash text-light"></i>
            <% end %>
          </td>
        </tr>
      <%end%>
    </table>
  <% end %>

<div class="text-center">
  <% if track.unstarted? %>
    <%= form_with(model: [@track, interval = Interval.new], local: true) do |form| %>
      <div class="form-team-b" style="width: 80%; margin-left: 10%;">
        <div class="form-team-c">
          <% if interval.errors[:description].any? %>
            <div class="form-group">
              <div style='border: 3px solid red !important'>
                <span class="input-group-addon"></span>
                <%= form.text_field :description, input_html: {class: 'form-control'}, class: "form-control", placeholder: interval.errors[:description][0] %>				
              </div>
            </div>
          <% else %>
            <div class="form-group">
              <div class="input-group">
                <span class="input-group-addon"></span>
                <%= form.text_field :description, input_html: {class: 'form-control'}, class: "form-control", placeholder: 'what will you do in this time?' %>				
              </div>
            </div>
          <% end %>    
          <div class="actions">
            <%= form.hidden_field 'start_track', value: true %>
            <%= form.button class: 'btnIcon btnIconColor btnStartResume' do %>
              <i class="fa fa-play text-white"></i> start
            <% end %>
    <% end %>
    <%= link_to new_track_interval_path(track.id, start_track: true), class: 'btnIcon btnIconColor btnComplete', data: { turbolinks: false } do %>
        <i class="fa fa-list-ul text-white"></i> complete
    <% end %>
    </div>
    </div>
  </div>

  <% elsif track.in_progress? %>
    <% if track.open_interval %>
      <%= form_with(model: [@track, @track.open_interval], local: true) do |form| %>
        <div class="actions">
          <%= form.hidden_field 'start_track', value: true %>
          <%= form.button class: 'btnIcon btnIconColor btnFinishPause' do %>
            <i class="fa fa-pause text-white"></i> Pause
          <% end %>
        </div>
      <% end %>
    <% else %>
      <%= form_with(model: [@track, interval = Interval.new], local: true) do |form| %>
      <div class="form-team-b bg-light" style="width: 80%; margin-left: 10%;">
      <div class="form-team-c">
        <% if interval.errors[:description].any? %>
            <div class="form-group">
              <div style='border: 3px solid red !important'>
                <span class="input-group-addon"></span>
                <%= form.text_field :description, input_html: {class: 'form-control'}, class: "form-control", placeholder: interval.errors[:description][0] %>				
              </div>
            </div>
          <% else %>
            <div class="form-group">
              <div class="input-group">
                <span class="input-group-addon"></span>
                <%= form.text_field :description, input_html: {class: 'form-control'}, class: "form-control", placeholder: '(*) What will you do in this time?' %>				
              </div>
            </div>
          <% end %>
        <div class="actions">
          <%= form.hidden_field 'start_track', value: true %>
          <%= form.button class: 'btnIcon btnIconColor btnStartResume' do %>
            <i class="fa fa-retweet text-white"></i> resume
          <% end %>
        <% end %>
        <%= link_to new_track_interval_path(track.id, start_track: true), class: 'btnIcon btnIconColor btnComplete', data: { turbolinks: false } do %>
          <i class="fa fa-list-ul text-white"></i> complete
        <% end %>
      </div>
    </div>
  </div>

    <% end %>
  <% end %>
</div>
</div>
